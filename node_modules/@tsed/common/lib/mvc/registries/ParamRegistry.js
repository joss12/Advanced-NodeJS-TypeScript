"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ParamRegistry = void 0;
const ParamMetadata_1 = require("../models/ParamMetadata");
const DeserializerPipe_1 = require("../pipes/DeserializerPipe");
const ParseExpressionPipe_1 = require("../pipes/ParseExpressionPipe");
const ValidationPipe_1 = require("../pipes/ValidationPipe");
/**
 * @deprecated Use ParamMetadata instead of
 */
class ParamRegistry extends ParamMetadata_1.ParamMetadata {
    /**
     * @param filter
     * @param options
     * @deprecated
     */
    /* istanbul ignore next */
    static useFilter(filter, options) {
        const { expression, useType, propertyKey, index, target, useConverter, useValidation } = options;
        let { paramType } = options;
        const param = ParamRegistry.get(target, propertyKey, index);
        if (typeof filter === "string") {
            paramType = filter;
        }
        else {
            param.filter = filter;
        }
        param.expression = expression;
        if (paramType) {
            param.paramType = paramType;
        }
        if (useType) {
            param.type = useType;
        }
        param.pipes = [
            param.expression && ParseExpressionPipe_1.ParseExpressionPipe,
            useValidation && (param.type || param.collectionType) && ValidationPipe_1.ValidationPipe,
            useConverter && DeserializerPipe_1.DeserializerPipe,
            ...param.pipes
        ].filter(Boolean);
        return param;
    }
}
exports.ParamRegistry = ParamRegistry;
//# sourceMappingURL=ParamRegistry.js.map